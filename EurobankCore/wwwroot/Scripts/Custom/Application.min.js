function addConfirmButton_Accounts(e){$(".k-widget k-window k-display-inline-flex").addClass("leftpopup");$("a.k-grid-update").addClass("SAVEASDRAFT");var model=e.model;model.Accounts_Status=!1;model.dirty=!0;$("a.k-grid-cancel").addClass("btn btn-link");$("a.k-grid-update")[0].innerHTML="SAVE AS DRAFT";$("a.k-grid-cancel")[0].innerHTML="<span class='k-icon k-i-cancel'><\/span>CLOSE";$('<a class="k-button k-button-icontext k-primary k-grid-update custom" href="#" k-icon k-i-delete"><\/span>SAVE & CLOSE<\/a>').insertBefore(".k-grid-update");$(".custom").click(function(){model.Accounts_Status=!0});$(".SAVEASDRAFT").click(function(){model.Accounts_Status=!1});isApplicationPermisssionEdit=="False"&&setAllPopUpInputElementDisabled();$(".k-widget.k-window.k-display-inline-flex input").keyup(function(){var validatePopup=$(".k-popup-edit-form").kendoValidator().data("kendoValidator");validatePopup.validate();$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():$($(this).closest("div")).children("div.field-validation-error").hide())});$(".k-widget.k-window.k-display-inline-flex input").change(function(){$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():$($(this).closest("div")).children("div.field-validation-error").hide())})}function onAccountDataBound(){$("#AccountsDetails .k-grid-add").html("<span class='k-icon k-i-plus-circle mr-1'><\/span>New").addClass("new-contact").removeClass("k-button k-button-icontext");$("#AccountsDetails .k-grid-content").attr("style","max-height: 400px");var grid=$("#AccountsDetails").data("kendoGrid"),gridRows=grid.tbody.find("tr");gridRows.each(function(){var rowItem=grid.dataItem($(this));console.log(rowItem.Id);rowItem.AccountsID==0&&grid.removeRow(rowItem)});isAllConfirmed($("#hdnApplication_LeftMenu_AccountDetails").val(),"Accounts","AccountsDetails");manageAccountMenuPanel()}function error_handlerApplicationDetails(args){var errors=args.errors,grid;if(errors){grid=$("#AccountsDetails").data("kendoGrid");grid.one("dataBinding",function(e){e.preventDefault();$.each(errors,function(key,value){var message="";"errors"in value&&$.each(value.errors,function(){message+=this+"\n"});grid.editable.element.find("[data-valmsg-for='"+key+"']").replaceWith('<div class="k-tooltip k-tooltip-error k-validator-tooltip k-invalid-msg field-validation-error" ><span class="k-tooltip-icon k-icon k-i-warning"> <\/span><span class="k-tooltip-content">'+message+'<\/span><div class="k-callout k-callout-n"><\/div><\/div>').show()})})}}function AccountEditDeleteConfirmation(e){var dialog=$("#AccountEditDeleteConfirmation").data("kendoWindow");dialog.wrapper.addClass("middle-popup");dialog.center().open();$("#AccountEditYes").unbind().click(function(){var dialog,row,grid;UpdateDebitCardRec();dialog=$("#AccountEditDeleteConfirmation").data("kendoWindow");dialog.close();row=$(e.target).parent()[0];grid=$("#AccountsDetails").data("kendoGrid");grid.editRow(row)});$("#AccountEditNo").click(function(){var dialog=$("#AccountEditDeleteConfirmation").data("kendoWindow");dialog.close()})}function UpdateDebitCardRec(){$.ajax({url:$("#DebitCardStatusUpdateUrl").val(),cache:!1,type:"POST",data:{id:$("#ApplicationId").val(),usedCurrency:$("#UsedCurrency").val()},success:function(){$("#DebitCardDetails").data("kendoGrid").dataSource.read();$("#DebitCardDetails").data("kendoGrid").refresh()}})}function IsAccountUseInCard(data){var res="",accountCurrency=data.Accounts_AccountTypeName+" - "+data.Accounts_CurrencyName;return $("#UsedCurrency").val(accountCurrency.toUpperCase()),$.ajax({"async":!1,type:"POST",url:$("#AccountUsedInCardUrl").val(),dataType:"json",cache:!1,data:{id:$("#ApplicationId").val(),applicationType:$("#EntityTypeCode").val(),editCurrency:accountCurrency},success:function(result){res=result}}),res}function onApplicantDataBound(){$("#Applicants .k-grid-add").html("<span class='k-icon k-i-plus-circle mr-1'><\/span>New").addClass("new-contact").removeClass("k-button k-button-icontext");$("#Applicants .k-grid-content").attr("style","max-height: 400px");isAllConfirmed($("#hdnApplication_LeftMenu_Applicants").val(),"Applicants","Applicants");CheckApplicantCount();manageApplicantMenuPanel();BindReasonForopeningAcc()}function CheckApplicantCount(){var applicantionType=$("#ApplicationTypeName").val(),kendoGrid=$("#Applicants").data("kendoGrid");(applicantionType=="LEGAL ENTITY"||applicantionType=="INDIVIDUAL")&&kendoGrid.dataSource.total()>0?($("#divCreateNewApplicant").hide(),$("#lnkCreateNewApplicant").hide()):($("#divCreateNewApplicant").show(),$("#lnkCreateNewApplicant").show())}function BindReasonForopeningAcc(){var multiReasonForOpening=$("#ReasonForOpeningTheAccountGroup").data("kendoMultiSelect");multiReasonForOpening!=undefined&&multiReasonForOpening.dataSource.read()}function formatNumber(num){return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function limitlengththousandsseparator(obj,length,spanid){var maxlength=length,texboxValue=Math.trunc(obj.value.replace(/,/g,""));texboxValue.toString().length>maxlength?(document.getElementById(spanid).innerHTML="Maximum allowed length of the input text is "+length,obj.value=texboxValue.toString().substring(0,maxlength)):document.getElementById(spanid).innerHTML=" "}function isAllConfirmed(menuTitle,moduleName,gridName){var searchName="Pending",isNotCompleted=!1,kendoGrid=$("#"+gridName).data("kendoGrid"),searchNameFound=kendoGrid.dataSource.data().some(function(dataItem){var steps,arr;moduleName=="Applicants"||moduleName=="RelatedParties"?dataItem.Status==searchName&&(isNotCompleted=!0):moduleName=="Accounts"?dataItem.Account_Status_Name==searchName&&(isNotCompleted=!0):moduleName=="Cards"?dataItem.DebitCardDetails_StatusName==searchName&&(isNotCompleted=!0):moduleName=="EBanking"||moduleName=="Notes"||moduleName=="SignatureMandate"?dataItem.Status_Name==searchName&&(isNotCompleted=!0):(moduleName=="GroupStructure"||moduleName=="SignatureMandateLegal")&&dataItem.StatusName==searchName&&(isNotCompleted=!0);kendoGrid.dataSource.indexOf(dataItem)==kendoGrid.dataSource.total()-1&&(steps=$("#ApplicationStepper").data("kendoStepper")._steps,isNotCompleted?($("#ApplicationStepper a[title='"+menuTitle+"' i]").parent().removeClass("k-step-done").removeClass("k-step-success").addClass("k-step-error"),$("#ApplicationStepper a[title='"+menuTitle+"' i]").find("span .k-step-indicator-icon.k-icon").removeClass("k-i-checkmark-circle").addClass("k-i-video-external"),$("#ApplicationStepper a[title='"+menuTitle+"' i]").attr("aria-invalid","true"),arr=jQuery.grep(steps,function(n,i){n.options.label==menuTitle&&($("#ApplicationStepper").data("kendoStepper")._steps[i].options.error=!0,$("#ApplicationStepper").data("kendoStepper")._steps[i].options.icon="video-external")})):($("#ApplicationStepper a[title='"+menuTitle+"' i]").parent().removeClass("k-step-error").addClass("k-step-done").addClass("k-step-success"),arr=jQuery.grep(steps,function(n,i){n.options.label==menuTitle&&($("#ApplicationStepper").data("kendoStepper")._steps[i].options.error=!1,$("#ApplicationStepper").data("kendoStepper")._steps[i].options.icon="checkmark-circle")}),$("#ApplicationStepper a[title='"+menuTitle+"' i]").find("span .k-step-indicator-icon.k-icon").removeClass("k-i-video-external").addClass("k-i-checkmark-circle"),$("#ApplicationStepper a[title='"+menuTitle+"' i]").removeAttr("aria-invalid"),$("#ApplicationStepper a[title='"+menuTitle+"' i]").find("span .k-icon.k-i-warning").remove()))})}function setMenuSuccess(menuTitle){menuTitle.indexOf("&amp;")>0&&(menuTitle=menuTitle.replace("&amp;","&"));$("#ApplicationStepper a[title='"+menuTitle+"' i]").parent().removeClass("k-step-error").addClass("k-step-done").addClass("k-step-success");var steps=$("#ApplicationStepper").data("kendoStepper")._steps,arr=jQuery.grep(steps,function(n,i){n.options.label==menuTitle&&($("#ApplicationStepper").data("kendoStepper")._steps[i].options.error=!1,$("#ApplicationStepper").data("kendoStepper")._steps[i].options.icon="checkmark-circle")});$("#ApplicationStepper a[title='"+menuTitle+"' i]").find("span .k-step-indicator-icon.k-icon").removeClass("k-i-video-external").addClass("k-i-checkmark-circle");$("#ApplicationStepper a[title='"+menuTitle+"' i]").removeAttr("aria-invalid");$("#ApplicationStepper a[title='"+menuTitle+"' i]").find("span .k-icon.k-i-warning").remove()}function setMenuError(menuTitle){menuTitle.indexOf("&amp;")>0&&(menuTitle=menuTitle.replace("&amp;","&"));$("#ApplicationStepper a[title='"+menuTitle+"' i]").parent().removeClass("k-step-done").removeClass("k-step-success").addClass("k-step-error");$("#ApplicationStepper a[title='"+menuTitle+"' i]").find("span .k-step-indicator-icon.k-icon").removeClass("k-i-checkmark-circle").addClass("k-i-video-external");$("#ApplicationStepper a[title='"+menuTitle+"' i]").attr("aria-invalid","true");var steps=$("#ApplicationStepper").data("kendoStepper")._steps,arr=jQuery.grep(steps,function(n,i){n.options.label==menuTitle&&($("#ApplicationStepper").data("kendoStepper")._steps[i].options.error=!0,$("#ApplicationStepper").data("kendoStepper")._steps[i].options.icon="video-external")})}function validatePurposeAndActivity(){$.ajax({url:$("#ValidatePurposeAndActivityUrl").val(),cache:!1,type:"POST",data:{reasonsForOpeningValues:$("#ReasonForOpeningTheAccountGroup").data("kendoMultiSelect").value(),expectedNatureOfTranValues:$("#ExpectedNatureOfInAndOutTransactionGroup").data("kendoMultiSelect").value(),expectedFrequencyOfTranValues:$("#ExpectedFrequencyOfInAndOutTransactionGroup").data("kendoRadioGroup").value(),expectedIncome:$("#PurposeAndActivity_ExpectedIncomingAmount").val(),applicationId:$("#hdnapplicationId").val(),applicationNumber:$("#ApplicationNumber").val()},success:function(result){result.IsValid==!0?setMenuSuccess($("#Application_LeftMenu_PurposeAndActivity").val()):setMenuError($("#Application_LeftMenu_PurposeAndActivity").val())}})}function validateGroupStructure(){$.ajax({url:$("#ValidateGroupStructureUrl").val(),cache:!1,type:"POST",data:{applicantionId:$("#ApplicationId").val(),applicationNumber:$("#ApplicationNumber").val(),doesTheEntityBelongToAGroupName:$("#DoesTheEntityBelongToAGroupNameID").val(),groupActivities:$("#GroupStructureLegalParent_GroupActivities").val(),groupName:$("#GroupStructureLegalParent_GroupName").val()},success:function(result){result.IsValid==!0?setMenuSuccess($("#hdnApplication_LeftMenu_GroupStructure").val()):setMenuError($("#hdnApplication_LeftMenu_GroupStructure").val())}})}function manageApplicantMenuPanel(){var kendoApplicantGrid=$("#Applicants").data("kendoGrid"),innerHtml,datasourcedata,i,fullApplicantName,url;if(kendoApplicantGrid.dataSource.total()>0){for(innerHtml="",datasourcedata=kendoApplicantGrid.dataSource.data(),i=0;i<datasourcedata.length;i++)fullApplicantName=datasourcedata[i].FullName,url=$("#RedirectToApplicant").val()+"?application="+$("#ApplicationNodeGUID").val()+"&&applicant="+datasourcedata[i].NodeGUID,innerHtml=innerHtml+'<a class="appl-list" href="javascript:void(0);" onclick="showHideLoader();window.location.href=\''+url+'\'"><span class="row viewall appl-item" style="margin-left: 20%;color: #27438c;">'+fullApplicantName.toUpperCase()+"<\/span><\/a>";$('#ApplicationStepper li a[title="Applicants"]').parent().length>0&&($("#appendedAppplicants").length>0&&$("#appendedAppplicants").remove(),$('#ApplicationStepper li a[title="Applicants"]').parent().append('<div id="appendedAppplicants">'+innerHtml+"<\/div>"))}else $("#appendedAppplicants").length>0&&$("#appendedAppplicants").remove()}function manageRelatedPartyMenuPanel(){var kendoApplicantGrid=$("#RelatedParties").data("kendoGrid"),innerHtml,datasourcedata,i,fullApplicantName,url;if(kendoApplicantGrid.dataSource.total()>0){for(innerHtml="",datasourcedata=kendoApplicantGrid.dataSource.data(),i=0;i<datasourcedata.length;i++)fullApplicantName=datasourcedata[i].FullName,url=$("#RedirectToRelatedParty").val()+"?application="+$("#ApplicationNodeGUID").val()+"&&relatedParty="+datasourcedata[i].NodeGUID+"&&type="+datasourcedata[i].Type,innerHtml=innerHtml+'<a class="appl-list" href="javascript:void(0);" onclick="showHideLoader();window.location.href=\''+url+'\'"><span class="row viewall appl-item" style="margin-left: 20%;color: #27438c;">'+fullApplicantName.toUpperCase()+"<\/span><\/a>";$('#ApplicationStepper li a[title="Related Parties"]').parent().length>0&&($("#appendedRelatedParties").length>0&&$("#appendedRelatedParties").remove(),$('#ApplicationStepper li a[title="Related Parties"]').parent().append('<div id="appendedRelatedParties">'+innerHtml+"<\/div>"))}else $("#appendedRelatedParties").length>0&&$("#appendedRelatedParties").remove()}function manageAccountMenuPanel(){var kendoApplicantGrid=$("#AccountsDetails").data("kendoGrid"),innerHtml,datasourcedata,i,fullAccountName;if(kendoApplicantGrid.dataSource.total()>0){for(innerHtml="",datasourcedata=kendoApplicantGrid.dataSource.data(),i=0;i<datasourcedata.length;i++)fullAccountName=datasourcedata[i].Accounts_AccountTypeName+" - "+datasourcedata[i].Accounts_CurrencyName,innerHtml=innerHtml+'<span class="row" style="margin-left: 20%;color: #27438c;">'+fullAccountName.toUpperCase()+"<\/span>";$('#ApplicationStepper li a[title="Accounts"]').parent().length>0&&($("#appendedAccountDetails").length>0&&$("#appendedAccountDetails").remove(),$('#ApplicationStepper li a[title="Accounts"]').parent().append('<div id="appendedAccountDetails">'+innerHtml+"<\/div>"))}else $("#appendedAccountDetails").length>0&&$("#appendedAccountDetails").remove()}function manageEbankingSubscriberMenuPanel(){var kendoApplicantGrid=$("#EBankingSubscriber").data("kendoGrid"),innerHtml,datasourcedata,i,fullEbankingSubscriberName;if(kendoApplicantGrid.dataSource.total()>0){for(innerHtml="",datasourcedata=kendoApplicantGrid.dataSource.data(),i=0;i<datasourcedata.length;i++)fullEbankingSubscriberName=datasourcedata[i].SubscriberName+" - "+datasourcedata[i].AccessLevelName,innerHtml=innerHtml+'<span class="row" style="margin-left: 20%;color: #27438c;">'+fullEbankingSubscriberName.toUpperCase()+"<\/span>";$('#ApplicationStepper li a[title="Digital Banking"]').parent().length>0&&($("#appendedfullEbankingSubscriberNameDetails").length>0&&$("#appendedfullEbankingSubscriberNameDetails").remove(),$('#ApplicationStepper li a[title="Digital Banking"]').parent().append('<div id="appendedfullEbankingSubscriberNameDetails">'+innerHtml+"<\/div>"))}else $("#appendedfullEbankingSubscriberNameDetails").length>0&&$("#appendedfullEbankingSubscriberNameDetails").remove()}function manageDebitCardMenuPanel(){var kendoApplicantGrid=$("#DebitCardDetails").data("kendoGrid"),innerHtml,datasourcedata,i,fullDebitCardName;if(kendoApplicantGrid.dataSource.total()>0){for(innerHtml="",datasourcedata=kendoApplicantGrid.dataSource.data(),i=0;i<datasourcedata.length;i++)fullDebitCardName=datasourcedata[i].DebitCardDetails_FullName+" - "+datasourcedata[i].DebitCardDetails_CardTypeName,innerHtml=innerHtml+'<span class="row" style="margin-left: 20%;color: #27438c;">'+fullDebitCardName.toUpperCase()+"<\/span>";$('#ApplicationStepper li a[title="Debit Cards"]').parent().length>0&&($("#appendedfullDebitCardDetails").length>0&&$("#appendedfullDebitCardDetails").remove(),$('#ApplicationStepper li a[title="Debit Cards"]').parent().append('<div id="appendedfullDebitCardDetails">'+innerHtml+"<\/div>"))}else $("#appendedfullDebitCardDetails").length>0&&$("#appendedfullDebitCardDetails").remove()}function manageGroupStructureMenuPanel(){var kendoGroupStructureGrid=$("#GroupStructure").data("kendoGrid"),innerHtml,datasourcedata,i,GroupStructureName;if(kendoGroupStructureGrid.dataSource.total()>0){for(innerHtml="",datasourcedata=kendoGroupStructureGrid.dataSource.data(),i=0;i<datasourcedata.length;i++)GroupStructureName=datasourcedata[i].EntityName,innerHtml=innerHtml+'<span class="row" style="margin-left: 20%;color: #27438c;">'+GroupStructureName.toUpperCase()+"<\/span>";$('#ApplicationStepper li a[title="Group Structure"]').parent().length>0&&($("#appendedGroupStructure").length>0&&$("#appendedGroupStructure").remove(),$('#ApplicationStepper li a[title="Group Structure"]').parent().append('<div id="appendedGroupStructure">'+innerHtml+"<\/div>"))}else $("#appendedGroupStructure").length>0&&$("#appendedGroupStructure").remove()}function RemoveAllValidationMessage(){$(".k-widget.k-window.k-display-inline-flex input").each(function(){if($(this).closest("div").children("div.field-validation-error").length>0){var elementName=$(this).attr("name");$($(this).closest("div")).children("div.field-validation-error").remove();$($(this).closest("div")).append('<span class="field-validation-valid k-hidden" data-valmsg-for="'+elementName+'" data-valmsg-replace="true"><\/span>')}});$(".k-widget.k-window.k-display-inline-flex select").each(function(){if($($(this).closest("div")).next("div.field-validation-error").length>0){var elementName=$(this).attr("name");$($(this).closest("div")).next("div.field-validation-error").remove();$(this).closest("div").parent().closest("div").append('<span class="field-validation-valid k-hidden" data-valmsg-for="'+elementName+'" data-valmsg-replace="true"><\/span>')}})}function setTwoNumberDecimal(){this.value=parseFloat(this.value).toFixed(2)}function allowAlphaNumericSpaceN(e){var code="charCode"in e?e.charCode:e.keyCode;code==32||code>47&&code<58||code>64&&code<91||code>96&&code<123||e.preventDefault()}function ChangeMaxLengthLegalCardPhone(){var selectedPhoneNo=$("#Country_Code").data("kendoDropDownList")!=undefined?$("#Country_Code").data("kendoDropDownList").text():"";field=document.getElementById("DebitCardDetails_MobileNumber");selectedPhoneNo=="CYPRUS +357"&&(field.value=field.value.substr(0,8));$("#DebitCardDetails_MobileNumber").keyup()}function limitlengthAccToCountry(obj,spanid,ddlid){var selectedCountryNo=$("#"+ddlid).data("kendoDropDownList")!=undefined?$("#"+ddlid).data("kendoDropDownList").text():"",maxlength,errormsg;selectedCountryNo=="CYPRUS +357"?(maxlength=8,errormsg="In case of Cyprus Maximum allowed length is "+maxlength):(maxlength=10,errormsg="Maximum allowed length of the input text is "+maxlength);obj.value.length>maxlength?(document.getElementById(spanid).innerHTML=errormsg,obj.value=obj.value.substring(0,maxlength)):document.getElementById(spanid).innerHTML=" "}function ShowRespectedFieldIndividualCard(){$("#DebitCardDetails_DeliveryAddress").data("kendoDropDownList").value("");var selectValue=$("#DebitCardDetails_DispatchMethod").data("kendoDropDownList").text();selectValue=="To be collected from the banking centre by me personally"?($("#CollectedByID").css("display","none"),$("#IdentityNumberID").css("display","none"),$("#DeliveryAddressID").css("display","none")):selectValue=="TO BE COLLECTED FROM THE BANKING CENTRE BY (FULL NAME AND IDENTITY CARD/PASSPORT NO.)"?($("#CollectedByID").css("display","block"),$("#IdentityNumberID").css("display","block"),$("#DeliveryAddressID").css("display","none")):selectValue=="TO BE DISPATCHED BY COURIER SERVICE TO THE CARDHOLDER’S MAILING ADDRESS (APPLICABLE FOR OVERSEAS ADDRESSES)"?($("#DeliveryAddressID").css("display","none"),$("#CollectedByID").css("display","none"),$("#IdentityNumberID").css("display","none")):selectValue=="TO BE DISPATCHED BY COURIER SERVICE TO THE FOLLOWING ADDRESS (APPLICABLE ONLY FOR OVERSEAS ADDRESSES)"?($("#DeliveryAddressID").css("display","block"),$("#CollectedByID").css("display","none"),$("#IdentityNumberID").css("display","none")):($("#CollectedByID").css("display","none"),$("#IdentityNumberID").css("display","none"),$("#DeliveryAddressID").css("display","none"));$("#DebitCardDetails_OtherDeliveryAddress").val("");$("#otherDeliveryAddress").css("display","none")}function ShowRespectedFieldLegalCard(){$("#DebitCardDetails_DeliveryAddress").data("kendoDropDownList").value("");var selectValue=$("#DebitCardDetails_DispatchMethod").data("kendoDropDownList").text();selectValue=="TO BE COLLECTED FROM THE BANKING CENTRE BY THE AUTHORISED CARDHOLDER"?($("#CollectedByID").css("display","none"),$("#IdentityNumberID").css("display","none"),$("#DeliveryAddressID").css("display","none")):selectValue=="TO BE COLLECTED FROM THE BANKING CENTRE BY (FULL NAME AND IDENTITY CARD/PASSPORT NO.)"?($("#CollectedByID").css("display","block"),$("#IdentityNumberID").css("display","block"),$("#DeliveryAddressID").css("display","none")):selectValue=="TO BE DISPATCHED BY COURIER SERVICE TO THE COMPANY’S MAILING ADDRESS (APPLICABLE FOR OVERSEAS ADDRESSES)"?($("#DeliveryAddressID").css("display","none"),$("#CollectedByID").css("display","none"),$("#IdentityNumberID").css("display","none")):selectValue=="TO BE DISPATCHED BY COURIER SERVICE TO THE FOLLOWING ADDRESS (APPLICABLE FOR OVERSEAS ADDRESSES)"?($("#DeliveryAddressID").css("display","block"),$("#CollectedByID").css("display","none"),$("#IdentityNumberID").css("display","none")):($("#CollectedByID").css("display","none"),$("#IdentityNumberID").css("display","none"),$("#DeliveryAddressID").css("display","none"));ShowHideOtherDeliveryAddress()}function onDeliveryAddressChange(){ShowHideOtherDeliveryAddress()}function ShowHideOtherDeliveryAddress(){var deliveryAddressSelectValue=$("#DebitCardDetails_DeliveryAddress").data("kendoDropDownList").text();deliveryAddressSelectValue!=undefined&&deliveryAddressSelectValue=="Other Address"?$("#otherDeliveryAddress").show():($("#DebitCardDetails_OtherDeliveryAddress").val(""),$("#otherDeliveryAddress").hide())}function FillIdentification(){GetIdentityCard();GetCardHolderAddresss();CopyName()}function GetIdentityCard(){var ddlCardHolder=$("#DebitCardDetails_CardholderName").data("kendoDropDownList"),relatedPartyGuid;ddlCardHolder!=undefined&&(relatedPartyGuid=ddlCardHolder.value(),$.ajax({url:$("#GetIdentityCardUrl").val(),cache:!1,type:"POST",data:{relatedPartyGuid:relatedPartyGuid},success:function(result){var ddlHolderIdentityCountryOfIssue=$("#DebitCardDetails_CardHolderCountryOfIssue").data("kendoDropDownList");ddlHolderIdentityCountryOfIssue!=undefined&&(ddlHolderIdentityCountryOfIssue.value(result.CountryOfIssue),ddlHolderIdentityCountryOfIssue.trigger("change"),ddlHolderIdentityCountryOfIssue.focus(),result.CountryOfIssue!=""&&$($("#DebitCardDetails_CardHolderCountryOfIssue").closest("div")).children("div.field-validation-error").hide());$("#DebitCardDetails_CardHolderIdentityNumber").length>0&&($("#DebitCardDetails_CardHolderIdentityNumber").val(result.IdentityNumber),$("#DebitCardDetails_CardHolderIdentityNumber").focus(),$("#DebitCardDetails_CardHolderIdentityNumber").focusout(),result.IdentityNumber!=""&&$($("#DebitCardDetails_CardHolderIdentityNumber").closest("div")).children("div.field-validation-error").hide())}}))}function CopyName(){var name=$("#DebitCardDetails_CardholderName").data("kendoDropDownList").text().toUpperCase();$("#DebitCardDetails_FullName").val(name).change().focus().focusout()}function showHideLoader(){var loader=$("#loader").data("kendoLoader");loadingPanelVisible=!loadingPanelVisible;loadingPanelVisible?loader.show():loader.hide()}function showHideLoaderN(callback){var loader=$("#loader").data("kendoLoader");loadingPanelVisible=!loadingPanelVisible;loadingPanelVisible?loader.show():loader.hide();callback&&typeof callback=="function"&&callback()}function onChangeApplicatonServices(e){var appServiceVal=$(e.target[0]).val(),appServiceValIsChecked=$(e.target[0]).is(":checked"),dialog;appServiceVal=="3fd36857-2751-44ea-9cdd-157d420661b7"?appServiceValIsChecked?($("#accordionDebitCardDetails").show(),$("#ApplicationStepper > ol > li > a[title|='Debit Cards']").parent().show()):$("#DebitCardDetails").data("kendoGrid").dataSource.total()>0?(dialog=$("#DebitcardConfirmation").data("kendoWindow"),dialog.wrapper.addClass("middle-popup"),dialog.center().open(),$(".k-i-close").addClass("CLDebitCard")):($("#accordionDebitCardDetails").hide(),$("#ApplicationStepper > ol > li > a[title|='Debit Cards']").parent().hide()):appServiceVal=="38f530db-4db7-4aae-a105-f19f43a9fb9d"&&(appServiceValIsChecked?($("#accordionEBankingSubscriber").show(),$("#ApplicationStepper > ol > li > a[title|='Digital Banking']").parent().show()):$("#EBankingSubscriber").data("kendoGrid").dataSource.total()>0?(dialog=$("#EbankingConfirmation").data("kendoWindow"),dialog.wrapper.addClass("middle-popup"),dialog.center().open(),$(".k-flat").addClass("CLEbanking")):($("#accordionEBankingSubscriber").hide(),$("#ApplicationStepper > ol > li > a[title|='Digital Banking']").parent().hide()))}function showHideCardEbankingSection(){var valueStore=[],dialog;$.each($("input[name='ApplicationDetails_ApplicatonServices']:checked"),function(){valueStore.push($(this).val())});$.inArray("3fd36857-2751-44ea-9cdd-157d420661b7",valueStore)!=-1?($("#accordionDebitCardDetails").show(),$("#ApplicationStepper > ol > li > a[title|='Debit Cards']").parent().show()):$("#DebitCardDetails").data("kendoGrid").dataSource.total()>0?(dialog=$("#DebitcardConfirmation").data("kendoWindow"),dialog.wrapper.addClass("middle-popup"),dialog.center().open(),$(".k-i-close").addClass("CLDebitCard")):($("#accordionDebitCardDetails").hide(),$("#ApplicationStepper > ol > li > a[title|='Debit Cards']").parent().hide());$.inArray("38f530db-4db7-4aae-a105-f19f43a9fb9d",valueStore)!=-1?($("#accordionEBankingSubscriber").show(),$("#ApplicationStepper > ol > li > a[title|='Digital Banking']").parent().show()):$("#EBankingSubscriber").data("kendoGrid").dataSource.total()>0?(dialog=$("#EbankingConfirmation").data("kendoWindow"),dialog.wrapper.addClass("middle-popup"),dialog.center().open(),$(".k-flat").addClass("CLEbanking")):($("#accordionEBankingSubscriber").hide(),$("#ApplicationStepper > ol > li > a[title|='Digital Banking']").parent().hide())}function SelectCardDetailsNo(){var dialog=$("#DebitcardConfirmation").data("kendoWindow");dialog.close();$("input[type=checkbox][value=3fd36857-2751-44ea-9cdd-157d420661b7]").prop("checked",!0)}function SelectDebitCardchk(){$("input[type=checkbox][value=3fd36857-2751-44ea-9cdd-157d420661b7]").prop("checked",!0)}function SelectCardDetailsYes(){$.ajax({url:$("#DebitCardDestoryAllUrl").val(),cache:!1,type:"POST",data:{id:$("#ApplicationId").val()},success:function(){$("#DebitCardDetails").data("kendoGrid").dataSource.read();$("#DebitCardDetails").data("kendoGrid").refresh();var dialog=$("#DebitcardConfirmation").data("kendoWindow");dialog.close();$("input[type=checkbox][value=3fd36857-2751-44ea-9cdd-157d420661b7]").prop("checked",!1);$("#accordionDebitCardDetails").hide();$("#ApplicationStepper > ol > li > a[title|='Debit Cards']").parent().hide()}})}function SelectEbankingNo(){var dialog=$("#EbankingConfirmation").data("kendoWindow");dialog.close();$("input[type=checkbox][value=38f530db-4db7-4aae-a105-f19f43a9fb9d]").prop("checked",!0)}function SelectEbankingchk(){$("input[type=checkbox][value=38f530db-4db7-4aae-a105-f19f43a9fb9d]").prop("checked",!0)}function SelectEbankingYes(){$.ajax({url:$("#EbankingDestroyAllUrl").val(),cache:!1,type:"POST",data:{id:$("#ApplicationId").val()},success:function(){$("#EBankingSubscriber").data("kendoGrid").dataSource.read();$("#EBankingSubscriber").data("kendoGrid").refresh();var dialog=$("#EbankingConfirmation").data("kendoWindow");dialog.close();$("input[type=checkbox][value=38f530db-4db7-4aae-a105-f19f43a9fb9d]").prop("checked",!1);$("#accordionEBankingSubscriber").hide();$("#ApplicationStepper > ol > li > a[title|='EBanking']").parent().hide()}})}function applicationPrintSummary(){$("#successDisplay .toastbody").html($("#PrintSummaryDownloadStartMessage").val());$("#successDisplay").show().delay(1e4).fadeOut();var url=$("#RedirectPrintSummary").val();window.location.href=url+"?applicationNumber="+$("#ApplicationNumber").val()}function applicationPrintFriendly(){$("#successDisplay .toastbody").html($("#PrintFriendlyDownloadStartMessage").val());$("#successDisplay").show().delay(1e4).fadeOut();var url=$("#RedirectPrintFriendly").val();window.location.href=url+"?applicationNumber="+$("#ApplicationNumber").val()}function applicationExportXML(){$.ajax({"async":!1,type:"GET",url:$("#ExportXMLUrlJS").val(),data:{appId:$("#hdnapplicationId").val()},beforeSend:function(){$("#loader").data("kendoLoader").show()},success:function(result){var xmlString=result,blob=new Blob([xmlString],{type:"application/xml"}),a=document.createElement("a");a.href=window.URL.createObjectURL(blob);a.download=$("#ApplicationNumber").val()+".xml";a.click();$("#loader").data("kendoLoader").hide()},error:function(error){console.log(error);$("#loader").data("kendoLoader").hide()}})}function downloadXMLThroughJavaScript(appid,applicationNumber){$.ajax({"async":!1,type:"GET",url:$("#ExportXMLUrlJS").val(),data:{appId:appid},timeout:18e4,success:function(result){console.log(result);var xmlString=result,blob=new Blob([xmlString],{type:"application/xml"}),a=document.createElement("a");a.href=window.URL.createObjectURL(blob);a.download=applicationNumber+".xml";a.click();showHideLoader()},error:function(error){console.log(error);showHideLoader()}})}function isNumberWithoutDecimalKey(evt){var charCode=evt.which?evt.which:event.keyCode;return charCode>31&&(charCode<48||charCode>57)?!1:!0}function ShowRoles(id,entityName){$.ajax({url:$("#GetRelatedPartyRolesUrl").val(),cache:!1,type:"POST",data:{relatedPartyGuid:id,isLegalEntity:$("#IsLegalEntity").val()},success:function(result){var i,row,searchWindow;for($("#EntityRoletbodyId").html(""),i=0;i<result.length;i++)row="<tr>",row+="<td>"+result[i]+"<\/td>",row+="<\/tr>",$("#EntityRoletbodyId").append(row);searchWindow=$("#EntityRoleWindow").data("kendoWindow");searchWindow.wrapper.addClass("middle-popup");searchWindow.center();searchWindow.open();searchWindow.title(entityName)}})}function bindRolesData(data){return data.EntityType_Name.toUpperCase()=="APPLICANT"?data.EntityRole_Name:`<a href="javascript:void(0);" onclick="ShowRoles('`+data.Entity+`','`+data.Entity_Name+`');" style="color: #0d6767"><b>View Roles</b></a>`}function onGridDataBoundBankdocuments(){$("#Bankdocuments .k-grid-add").html("<span class='k-icon k-i-plus-circle mr-1'><\/span>New").addClass("new-contact").removeClass("k-button k-button-icontext");$("#Bankdocuments .k-grid-content").attr("style","max-height: 400px");deleteEmptyGridRecord("Bankdocuments")}function addConfirmButton(e){$(".k-widget k-window k-display-inline-flex").addClass("leftpopup");var model=e.model;model.BankDocuments_Status=!1;model.dirty=!0;$("a.k-grid-cancel").addClass("btn btn-link");$("a.k-grid-update")[0].innerHTML="SAVE AS DRAFT";$("a.k-grid-cancel")[0].innerHTML="<span class='k-icon k-i-cancel'><\/span>CLOSE";$('<a class="k-button k-button-icontext k-primary k-grid-update custom" href="#" k-icon k-i-delete"><\/span>SAVE & CLOSE<\/a>').insertBefore(".k-grid-update");$(".custom").click(function(){model.BankDocuments_Status=!0});model.UploadFileName!=undefined&&model.UploadFileName!=null&&model.UploadFileName!=""?($("#prevUploadBankDoc").show(),model.UploadFileName.indexOf(".pdf")>0?GetDocuments(model.FileUpload,model.UploadFileName,model.ExternalFileGuid):GetDocumentsFile(model.FileUpload,model.UploadFileName,model.ExternalFileGuid)):$("#prevUploadBankDoc").hide();$(".k-widget.k-window.k-display-inline-flex input").keyup(function(){var validatePopup=$(".k-popup-edit-form").kendoValidator().data("kendoValidator");validatePopup.validate();$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():$($(this).closest("div")).children("div.field-validation-error").hide())});$(".k-widget.k-window.k-display-inline-flex input").change(function(){$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():$($(this).closest("div")).children("div.field-validation-error").hide())})}function Sync_handlerBankDocuments(e){e.sender.preventSync||(showHideLoader(),window.location.reload());e.sender.preventSync=!1}function error_handlerBankDocuments(args){var errors=args.errors,grid;if(errors){args.sender.preventSync=!0;grid=$("#Bankdocuments").data("kendoGrid");grid.one("dataBinding",function(e){e.preventDefault();$.each(errors,function(key,value){var message="";"errors"in value&&$.each(value.errors,function(){message+=this+"\n"});grid.editable.element.find("[data-valmsg-for='"+key+"']").replaceWith('<div class="k-tooltip k-tooltip-error k-validator-tooltip k-invalid-msg field-validation-error" ><span class="k-tooltip-icon k-icon k-i-warning"> <\/span><span class="k-tooltip-content">'+message+'<\/span><div class="k-callout k-callout-n"><\/div><\/div>').show()})})}}function GetDocuments(file,filename,fileGuid){$("#pdfDocumets").show();$("#othersDocumets").hide();$("#documentModalLabel").html(filename);$("#embBankDocument").attr("src",file.substring(1,file.length));file=downloadUrl+"?applicationNumber="+$("#ApplicationNumber").val()+"&fileGuid="+fileGuid+"&filename="+filename;$("#documentDownload").attr("href",file)}function GetDocumentsFile(file,filename,fileGuid){$("#pdfDocumets").hide();$("#othersDocumets").show();$("#documentModalLabel").html(filename);$("#embBankDocument").attr("src",file);file=downloadUrl+"?applicationNumber="+$("#ApplicationNumber").val()+"&fileGuid="+fileGuid+"&filename="+filename;$("#documentDownload").attr("href",file);$("#documentDownloadOthers").attr("href",file)}function onBankFileSuccess(e){$.map(e.files,function(file){var info=file.name;file.size>0&&(info+=" ("+Math.ceil(file.size/1024)+" KB)");$("#FileName").val(file.name)});$("body > div.k-widget.k-window.k-display-inline-flex > div.k-popup-edit-form.k-window-content > div > div:nth-child(5) > div.k-tooltip.k-tooltip-error.k-validator-tooltip.k-invalid-msg.field-validation-error").length>0&&$("body > div.k-widget.k-window.k-display-inline-flex > div.k-popup-edit-form.k-window-content > div > div:nth-child(5) > div.k-tooltip.k-tooltip-error.k-validator-tooltip.k-invalid-msg.field-validation-error").hide()}function onDebitCardDataBound(){$("#DebitCardDetails .k-grid-add").html("<span class='k-icon k-i-plus-circle mr-1'><\/span>New").addClass("new-contact").removeClass("k-button k-button-icontext");$("#DebitCardDetails .k-grid-content").attr("style","max-height: 400px");var grid=$("#DebitCardDetails").data("kendoGrid"),gridRows=grid.tbody.find("tr");gridRows.each(function(){var rowItem=grid.dataItem($(this));console.log(rowItem.Id);rowItem.DebitCardDetailsID==0&&grid.removeRow(rowItem)});isAllConfirmed($("#hdnApplication_LeftMenu_DebitCard").val(),"Cards","DebitCardDetails");manageDebitCardMenuPanel()}function addConfirmButton_Debitcard(e){$(".k-widget k-window k-display-inline-flex").addClass("leftpopup");$("a.k-grid-update").addClass("SAVEASDRAFT");var model=e.model;model.DebitCardDetails_Status=!1;model.dirty=!0;$("a.k-grid-cancel").addClass("btn btn-link");$("a.k-grid-update")[0].innerHTML="SAVE AS DRAFT";$("a.k-grid-cancel")[0].innerHTML="<span class='k-icon k-i-cancel'><\/span>CLOSE";$('<a class="k-button k-button-icontext k-primary k-grid-update custom" href="#" k-icon k-i-delete"><\/span>SAVE & CLOSE<\/a>').insertBefore(".k-grid-update");$(".custom").click(function(){model.DebitCardDetails_Status=!0;$(".k-widget.k-window.k-display-inline-flex input").each(function(){if($(this).closest("div").children("div.field-validation-error").length>0){var elementName=$(this).attr("name");$($(this).closest("div")).children("div.field-validation-error").remove();$($(this).closest("div")).append('<span class="field-validation-valid k-hidden" data-valmsg-for="'+elementName+'" data-valmsg-replace="true"><\/span>')}})});$(".SAVEASDRAFT").click(function(){model.DebitCardDetails_Status=!1});$(".k-widget.k-window.k-display-inline-flex input").keyup(function(){var validatePopup=$(".k-popup-edit-form").kendoValidator().data("kendoValidator");validatePopup.validate();$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():$($(this).closest("div")).children("div.field-validation-error").hide())});$(".k-widget.k-window.k-display-inline-flex input").change(function(){$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():$($(this).closest("div")).children("div.field-validation-error").hide())});ShowHideOtherDeliveryAddressBind(model.DebitCardDetails_DeliveryAddress);isApplicationPermisssionEdit=="False"&&setAllPopUpInputElementDisabled();GetCardHolderAddresss(model.DebitCardDetails_DeliveryAddress);_selectedCardType=model.DebitCardDetails_CardType;FillIdentification()}function error_handlerDebitCardDetails(args){var errors=args.errors,grid;if(errors){grid=$("#DebitCardDetails").data("kendoGrid");grid.one("dataBinding",function(e){e.preventDefault();$.each(errors,function(key,value){var message="";"errors"in value&&$.each(value.errors,function(){message+=this+"\n"});grid.editable.element.find("[data-valmsg-for='"+key+"']").replaceWith('<div class="k-tooltip k-tooltip-error k-validator-tooltip k-invalid-msg field-validation-error" ><span class="k-tooltip-icon k-icon k-i-warning"> <\/span><span class="k-tooltip-content">'+message+'<\/span><div class="k-callout k-callout-n"><\/div><\/div>').show()})})}}function GetCardHolderAddresss(selectedItemValue){var ddlCardHolder=$("#DebitCardDetails_CardholderName").data("kendoDropDownList"),relatedPartyGuid;ddlCardHolder!=undefined&&(relatedPartyGuid=ddlCardHolder.value(),$.ajax({url:$("#CardHoderAddresses_ReadUrl").val(),cache:!1,type:"POST",data:{relatedPartyGuid:relatedPartyGuid},success:function(result){var ddlCardHolderddress=$("#DebitCardDetails_DeliveryAddress").data("kendoDropDownList");ddlCardHolderddress.setDataSource(result);ddlCardHolderddress.dataSource.read();selectedItemValue!=undefined&&selectedItemValue!=""&&selectedItemValue!=null&&ddlCardHolderddress.value(selectedItemValue)}}))}function onCardTypeDataBound(){SelectFistElement(_selectedCardType)}function IndividualDispatchMethodonDatabound(){ddlCardDispatchIndividual=$("#DebitCardDetails_DispatchMethod").data("kendoDropDownList");ddlCardDispatchIndividual.text("TO BE DISPATCHED BY POST TO THE CARDHOLDER’S MAILING ADDRESS (APPLICABLE FOR DOMESTIC AND OVERSEAS ADDRESSES).");ddlCardDispatchIndividual.trigger("change");ddlCardDispatchIndividual.readonly()}function LegalDispatchMethodOnDatabound(){ddlCardDispatchIndividual=$("#DebitCardDetails_DispatchMethod").data("kendoDropDownList");ddlCardDispatchIndividual.text("TO BE DISPATCHED BY POST TO THE COMPANY’S MAILING ADDRESS (APPLICABLE FOR DOMESTIC AND OVERSEAS ADDRESSES).");ddlCardDispatchIndividual.trigger("change");ddlCardDispatchIndividual.readonly()}function SelectFistElement(cardTypeValue){ddlCardType=$("#DebitCardDetails_CardType").data("kendoDropDownList");(cardTypeValue==undefined||cardTypeValue==null||cardTypeValue=="")&&ddlCardType.dataSource._total==1&&(ddlCardType.select(1),ddlCardType.trigger("change"))}function ShowHideOtherDeliveryAddressBind(modelDeliveryAddress){var deliveryAddressSelectValue=$("#DebitCardDetails_DeliveryAddress").data("kendoDropDownList").text();deliveryAddressSelectValue!=undefined&&deliveryAddressSelectValue=="Other Address"||modelDeliveryAddress!=undefined&&modelDeliveryAddress=="Other Address"?$("#otherDeliveryAddress").show():$("#otherDeliveryAddress").hide()}function onDecisionDDLChange(e){var dataItem,dropdownlist;e.item&&(dataItem=this.dataItem(e.item),dataItem.Value!=""?($.ajax({url:$("#DecisionHistoryStageUrl").val(),cache:!1,type:"POST",data:{applicationId:$("#ApplicationId").val(),decisionGuid:dataItem.Value},success:function(result){$("#DecisionHistory_StageID").val(result)}}),console.log(dataItem),dataItem.Text=="ESCALATE"?$("#divDecisionHistoryEscalateTo").show():($("#divDecisionHistoryEscalateTo").hide(),dropdownlist=$("#DecisionHistory_EscalateToID").data("kendoDropDownList"),dropdownlist.value(""))):($("#divDecisionHistoryEscalateTo").hide(),dropdownlist=$("#DecisionHistory_EscalateToID").data("kendoDropDownList"),dropdownlist.value("")))}function onEBankingDataBound(){$("#EBankingSubscriber .k-grid-add").html("<span class='k-icon k-i-plus-circle mr-1'><\/span>New").addClass("new-contact").removeClass("k-button k-button-icontext");$("#EBankingSubscriber .k-grid-content").attr("style","max-height: 400px");deleteEmptyGridRecord("EBankingSubscriber");isAllConfirmed($("#hdnApplication_LeftMenu_EBanking").val(),"EBanking","EBankingSubscriber");manageEbankingSubscriberMenuPanel()}function addConfirmButton_Ebanking(e){var model,AddFuture,ddlLimitAmount;$(".k-widget k-window k-display-inline-flex").addClass("leftpopup");$("a.k-grid-update").addClass("SAVEASDRAFT");model=e.model;model.EbankingSubscriberDetails_Status=!1;model.dirty=!0;$("a.k-grid-cancel").addClass("btn btn-link");$("a.k-grid-update")[0].innerHTML="SAVE AS DRAFT";$("a.k-grid-cancel")[0].innerHTML="<span class='k-icon k-i-cancel'><\/span>CLOSE";$('<a class="k-button k-button-icontext k-primary k-grid-update custom" href="#" k-icon k-i-delete"><\/span>SAVE & CLOSE<\/a>').insertBefore(".k-grid-update");$(".custom").click(function(){model.EbankingSubscriberDetails_Status=!0;$(".k-widget.k-window.k-display-inline-flex input").each(function(){if($(this).closest("div").children("div.field-validation-error").length>0){var elementName=$(this).attr("name");$($(this).closest("div")).children("div.field-validation-error").remove();$($(this).closest("div")).append('<span class="field-validation-valid k-hidden" data-valmsg-for="'+elementName+'" data-valmsg-replace="true"><\/span>')}})});$(".SAVEASDRAFT").click(function(){model.EbankingSubscriberDetails_Status=!1});$(".k-widget.k-window.k-display-inline-flex input").keyup(function(){var validatePopup=$(".k-popup-edit-form").kendoValidator().data("kendoValidator");validatePopup.validate();$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():$($(this).closest("div")).children("div.field-validation-error").hide())});$(".k-widget.k-window.k-display-inline-flex input").change(function(){$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():$($(this).closest("div")).children("div.field-validation-error").hide())});AddFuture=$("#AutomaticallyAddFuturePersonalAccounts").data("kendoDropDownList");AddFuture!=undefined&&(AddFuture.value("true"),AddFuture.trigger("change"),AddFuture.readonly());$("#ApplicationDetails_ApplicationTypeName").val()=="LEGAL ENTITY"?($("#AutomaticallyAddFuturePersonalAccountsID").css("display","block"),ShowSignatoryGroup(),FillSigGroupsLegal(model.Subscriber,model.SignatoryGroupName)):$("#AutomaticallyAddFuturePersonalAccountsID").css("display","block");isApplicationPermisssionEdit=="False"&&setAllPopUpInputElementDisabled();($("#ApplicationDetails_ApplicationTypeName").val()=="INDIVIDUAL"||$("#ApplicationDetails_ApplicationTypeName").val()=="JOINT INDIVIDUAL")&&(GetPersonType(),ddlLimitAmount=$("#LimitAmount").data("kendoDropDownList"),ddlLimitAmount.readonly());$("#ApplicantEntityType").val()=="Trust"&&(document.getElementById("spanAccessLevel").innerHTML="  (In case of more than one trustees, then all trustees must have the same Access Level)")}function ShowSignatoryGroup(){var selectValue=$("#AccessLevel").data("kendoDropDownList").text(),dropdown,ddlSignatoryGroupName;selectValue=="FULL"||selectValue=="AUTHORISE"?($("#SignatoryGroupDIV").css("display","block"),dropdown=$("#SignatoryGroupName").data("kendoDropDownList"),dropdown.dataSource.read(),dropdown.refresh()):(ddlSignatoryGroupName=$("#SignatoryGroupName").data("kendoDropDownList"),$("#SignatoryGroupDIV").css("display","none"),ddlSignatoryGroupName!=undefined&&ddlSignatoryGroupName.value(""))}function onAllPersonalAccountDataBound(){var ddlLimitAmount=$("#AccessToAllPersonalAccounts").data("kendoDropDownList");ddlLimitAmount!=undefined&&(ddlLimitAmount.value("true"),ddlLimitAmount.trigger("change"),ddlLimitAmount.readonly())}function onLimitAmountDataBound(){var ddlLimitAmount=$("#LimitAmount").data("kendoDropDownList");ddlLimitAmount!=undefined&&(ddlLimitAmount.text("MAXIMUM ALLOWABLE LIMIT PER TRANSACTION TYPE"),ddlLimitAmount.trigger("change"),ddlLimitAmount.readonly())}function onChangeEbankingSubscribersLegal(){FillSubscriberIdentityLegal();var ddlSignatoryName=$("#Subscriber").data("kendoDropDownList");ddlSignatoryName!=undefined&&FillSigGroupsLegal(ddlSignatoryName.value())}function onSubscriberSgGroupDataBound(){}function onSubscriberSgGroupSelect(){}function FillSubscriberIdentityLegal(){var ddlCardHolder=$("#Subscriber").data("kendoDropDownList"),relatedPartyGuid;ddlCardHolder!=undefined&&(relatedPartyGuid=ddlCardHolder.value(),$.ajax({url:$("#GetSubscriberIdentityUrl").val(),cache:!1,type:"POST",data:{relatedPartyGuid:relatedPartyGuid},success:function(result){var ddlHolderIdentityCountryOfIssue=$("#CountryOfIssue").data("kendoDropDownList");ddlHolderIdentityCountryOfIssue!=undefined&&(result!=null&&result!=null?(ddlHolderIdentityCountryOfIssue.value(result.CountryOfIssue),ddlHolderIdentityCountryOfIssue.trigger("change"),ddlHolderIdentityCountryOfIssue.focus()):(ddlHolderIdentityCountryOfIssue.value(""),ddlHolderIdentityCountryOfIssue.trigger("change"),ddlHolderIdentityCountryOfIssue.focus()));$("#IdentityPassportNumber").length>0&&(result!=null&&result!=null?($("#IdentityPassportNumber").val(result.IdentityNumber).change(),$("#IdentityPassportNumber").focus(),$("#IdentityPassportNumber").focusout()):($("#IdentityPassportNumber").val("").change(),$("#IdentityPassportNumber").focus(),$("#IdentityPassportNumber").focusout()))}}))}function FillSigGroupsLegal(signatoryNameValue,selectedItemValue){$.ajax({url:$("#GetSignatoryGroupForEBankingBySeletedPersonUrl").val(),cache:!1,type:"POST",data:{applicationId:$("#ApplicationId").val(),applicationNumber:$("#ApplicationNumber").val(),selectedPerson:signatoryNameValue},success:function(result){var ddlSignatoryPersonsList=$("#SignatoryGroupName").data("kendoDropDownList");ddlSignatoryPersonsList.setDataSource(result);ddlSignatoryPersonsList.dataSource.read();selectedItemValue!=undefined&&selectedItemValue!=""&&selectedItemValue!=null&&ddlSignatoryPersonsList.value(selectedItemValue)}})}function error_handlerEBankingSubscriber(args){var errors=args.errors,grid;if(errors){grid=$("#EBankingSubscriber").data("kendoGrid");grid.one("dataBinding",function(e){e.preventDefault();$.each(errors,function(key,value){var message="";"errors"in value&&$.each(value.errors,function(){message+=this+"\n"});grid.editable.element.find("[data-valmsg-for='"+key+"']").replaceWith('<div class="k-tooltip k-tooltip-error k-validator-tooltip k-invalid-msg field-validation-error" ><span class="k-tooltip-icon k-icon k-i-warning"> <\/span><span class="k-tooltip-content">'+message+'<\/span><div class="k-callout k-callout-n"><\/div><\/div>').show()})})}}function ShowRoles(id,entityName){$.ajax({url:$("#GetRelatedPartyRolesUrl").val(),cache:!1,type:"POST",data:{relatedPartyGuid:id,isLegalEntity:$("#IsLegalEntity").val()},success:function(result){var i,row,searchWindow;for($("#EntityRoletbodyId").html(""),i=0;i<result.length;i++)row="<tr>",row+="<td>"+result[i]+"<\/td>",row+="<\/tr>",$("#EntityRoletbodyId").append(row);searchWindow=$("#EntityRoleWindow").data("kendoWindow");searchWindow.wrapper.addClass("middle-popup");searchWindow.center();searchWindow.open();searchWindow.title(entityName)}})}function bindRolesData(data){return data.EntityType_Name.toUpperCase()=="APPLICANT"?data.EntityRole_Name:`<a href="javascript:void(0);" onclick="ShowRoles('`+data.Entity+`','`+data.Entity_Name+`');" style="color: #0d6767"><b>View Roles</b></a>`}function onGridDataBoundExpectedDocument(){$("#ExpectedDocuments .k-grid-add").html("<span class='k-icon k-i-plus-circle mr-1'><\/span>New").addClass("new-contact").removeClass("k-button k-button-icontext");$("#ExpectedDocuments .k-grid-content").attr("style","max-height: 400px");deleteEmptyGridRecord("ExpectedDocuments")}function onSavechangeExpectedDocument(){console.log("OnSaveChange")}function Sync_handlerExpectedDocuments(e){e.sender.preventSync||(showHideLoader(),window.location.reload());e.sender.preventSync=!1}function addExpectedConfirmButton(e){$(".k-widget k-window k-display-inline-flex").addClass("leftpopup");var model=e.model;model.BankDocuments_Status=!1;model.dirty=!0;$("a.k-grid-cancel").addClass("btn btn-link");$("a.k-grid-update")[0].innerHTML="SAVE AS DRAFT";$("a.k-grid-cancel")[0].innerHTML="<span class='k-icon k-i-cancel'><\/span>CLOSE";$('<a class="k-button k-button-icontext k-primary k-grid-update custom" href="#" k-icon k-i-delete"><\/span>SAVE & CLOSE<\/a>').insertBefore(".k-grid-update");$(".custom").click(function(){model.BankDocuments_Status=!0});model.UploadFileName!=undefined&&model.UploadFileName!=null&&model.UploadFileName!=""?($("#prevUploadExpectedDoc").show(),model.UploadFileName.indexOf(".pdf")>0?GetExpectedDocuments(model.FileUpload,model.UploadFileName,model.ExternalFileGuid):GetExpectedDocumentsFile(model.FileUpload,model.UploadFileName,model.ExternalFileGuid)):$("#prevUploadExpectedDoc").hide();$(".k-widget.k-window.k-display-inline-flex input").keyup(function(){var validatePopup=$(".k-popup-edit-form").kendoValidator().data("kendoValidator");validatePopup.validate();$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():$($(this).closest("div")).children("div.field-validation-error").hide())});$(".k-widget.k-window.k-display-inline-flex input").change(function(){$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():$($(this).closest("div")).children("div.field-validation-error").hide())})}function error_handlerExpectedDocuments(args){var errors=args.errors,grid;if(errors){args.sender.preventSync=!0;grid=$("#ExpectedDocuments").data("kendoGrid");grid.one("dataBinding",function(e){e.preventDefault();$.each(errors,function(key,value){var message="";"errors"in value&&$.each(value.errors,function(){message+=this+"\n"});grid.editable.element.find("[data-valmsg-for='"+key+"']").replaceWith('<div class="k-tooltip k-tooltip-error k-validator-tooltip k-invalid-msg field-validation-error" ><span class="k-tooltip-icon k-icon k-i-warning"> <\/span><span class="k-tooltip-content">'+message+'<\/span><div class="k-callout k-callout-n"><\/div><\/div>').show()})})}}function GetExpectedDocuments(file,filename,fileGuid){$("#pdfDocumetsExpected").show();$("#othersDocumetsExpected").hide();$("#ExpectedDocumentModalLabel").html(filename);$("#embDocumentExpected").attr("src",file.substring(1,file.length));file=downloadURL+"?applicationNumber="+$("#ApplicationNumber").val()+"&fileGuid="+fileGuid+"&filename="+filename;$("#ExpectedDocumentDownload").attr("href",file)}function GetExpectedDocumentsFile(file,filename,fileGuid){file=file.replace("~","");$("#pdfDocumetsExpected").hide();$("#othersDocumetsExpected").show();$("#ExpectedDocumentModalLabel").html(filename);$("#embDocumentExpected").attr("src",file);file=downloadURL+"?applicationNumber="+$("#ApplicationNumber").val()+"&fileGuid="+fileGuid+"&filename="+filename;$("#ExpectedDocumentDownload").attr("href",file);$("#ExpectedDocumentDownloadOthers").attr("href",file)}function onExpectedFileSuccess(e){$.map(e.files,function(file){var info=file.name;file.size>0&&(info+=" ("+Math.ceil(file.size/1024)+" KB)");$("#FileName").val(file.name);$("body > div.k-widget.k-window.k-display-inline-flex > div.k-popup-edit-form.k-window-content > div > div:nth-child(1) > div:nth-child(5) > div.k-tooltip.k-tooltip-error.k-validator-tooltip.k-invalid-msg.field-validation-error").length>0&&$("body > div.k-widget.k-window.k-display-inline-flex > div.k-popup-edit-form.k-window-content > div > div:nth-child(1) > div:nth-child(5) > div.k-tooltip.k-tooltip-error.k-validator-tooltip.k-invalid-msg.field-validation-error").hide()})}function onGroupStructureDataBound(){$("#GroupStructure .k-grid-add").html("<span class='k-icon k-i-plus-circle mr-1'><\/span>New").addClass("new-contact").removeClass("k-button k-button-icontext");$("#GroupStructure .k-grid-content").attr("style","max-height: 400px");deleteEmptyGridRecord("GroupStructure");isAllConfirmed($("#hdnApplication_LeftMenu_GroupStructure").val(),"GroupStructure","GroupStructure");manageGroupStructureMenuPanel();validateGroupStructure()}function ShowGroupStructureGrid(){var entityBelong=$("#DoesTheEntityBelongToAGroupNameID").val();entityBelong=="true"?$("#GroupStructureGridID").css("display","block"):($("#GroupStructureGridID").css("display","none"),$("#GroupStructureLegalParent_GroupName").val(""),$("#GroupStructureLegalParent_GroupActivities").val(""))}function addGSConfirmButton(e){$(".k-widget k-window k-display-inline-flex").addClass("leftpopup");$("a.k-grid-update").addClass("SAVEASDRAFT");var model=e.model;model.Status=!1;model.dirty=!0;$("a.k-grid-cancel").addClass("btn btn-link");$("a.k-grid-update")[0].innerHTML="SAVE AS DRAFT";$("a.k-grid-cancel")[0].innerHTML="<span class='k-icon k-i-cancel'><\/span>CLOSE";$('<a class="k-button k-button-icontext k-primary k-grid-update custom" href="#" k-icon k-i-delete"><\/span>SAVE & CLOSE<\/a>').insertBefore(".k-grid-update");$(".custom").click(function(){model.Status=!0});$(".SAVEASDRAFT").click(function(){model.Status=!1});$(".k-widget.k-window.k-display-inline-flex input").keyup(function(){var validatePopup=$(".k-popup-edit-form").kendoValidator().data("kendoValidator");validatePopup.validate();$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():$($(this).closest("div")).children("div.field-validation-error").hide())});$(".k-widget.k-window.k-display-inline-flex input").change(function(){$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():$($(this).closest("div")).children("div.field-validation-error").hide())});isApplicationPermisssionEdit=="False"&&setAllPopUpInputElementDisabled()}function error_handlerCompanyGroupStructure(args){var errors=args.errors,grid;if(errors){grid=$("#GroupStructure").data("kendoGrid");grid.one("dataBinding",function(e){e.preventDefault();$.each(errors,function(key,value){var message="";"errors"in value&&$.each(value.errors,function(){message+=this+"\n"});grid.editable.element.find("[data-valmsg-for='"+key+"']").replaceWith('<div class="k-tooltip k-tooltip-error k-validator-tooltip k-invalid-msg field-validation-error" ><span class="k-tooltip-icon k-icon k-i-warning"> <\/span><span class="k-tooltip-content">'+message+'<\/span><div class="k-callout k-callout-n"><\/div><\/div>').show()})})}}function onNoteDataBound(){$("#NoteDetails .k-grid-add").html("<span class='k-icon k-i-plus-circle mr-1'><\/span>New").addClass("new-contact").removeClass("k-button k-button-icontext");$("#NoteDetails .k-grid-content").attr("style","max-height: 400px");deleteEmptyGridRecord("NoteDetails");isAllConfirmed($("#hdnApplication_LeftMenu_Notes").val(),"Notes","NoteDetails")}function addConfirmButton_Notes(e){$(".k-widget k-window k-display-inline-flex").addClass("leftpopup");$("a.k-grid-update").addClass("SAVEASDRAFT");var model=e.model;model.NoteDetails_Status=!1;model.dirty=!0;$("a.k-grid-cancel").addClass("btn btn-link");$("a.k-grid-update")[0].innerHTML="SAVE AS DRAFT";$("a.k-grid-cancel")[0].innerHTML="<span class='k-icon k-i-cancel'><\/span>CLOSE";$('<a class="k-button k-button-icontext k-primary k-grid-update custom" href="#" k-icon k-i-delete"><\/span>SAVE & CLOSE<\/a>').insertBefore(".k-grid-update");$(".custom").click(function(){model.NoteDetails_Status=!0});$(".SAVEASDRAFT").click(function(){model.NoteDetails_Status=!1});$(".k-widget.k-window.k-display-inline-flex input").keyup(function(){var validatePopup=$(".k-popup-edit-form").kendoValidator().data("kendoValidator");validatePopup.validate();$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():$($(this).closest("div")).children("div.field-validation-error").hide())});$(".k-widget.k-window.k-display-inline-flex input").change(function(){$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():$($(this).closest("div")).children("div.field-validation-error").hide())});isApplicationPermisssionEdit=="False"&&setAllPopUpInputElementDisabled()}function error_handlerNoteDetails(args){var errors=args.errors,grid;if(errors){grid=$("#NoteDetails").data("kendoGrid");grid.one("dataBinding",function(e){e.preventDefault();$.each(errors,function(key,value){var message="";"errors"in value&&$.each(value.errors,function(){message+=this+"\n"});grid.editable.element.find("[data-valmsg-for='"+key+"']").replaceWith('<div class="k-tooltip k-tooltip-error k-validator-tooltip k-invalid-msg field-validation-error" ><span class="k-tooltip-icon k-icon k-i-warning"> <\/span><span class="k-tooltip-content">'+message+'<\/span><div class="k-callout k-callout-n"><\/div><\/div>').show()})})}}function onRelatedPartyDataBound(){$("#RelatedParties .k-grid-add").html("<span class='k-icon k-i-plus-circle mr-1'><\/span>New").addClass("new-contact").removeClass("k-button k-button-icontext");$("#RelatedParties .k-grid-content").attr("style","max-height: 400px");isAllConfirmed($("#hdnApplication_LeftMenu_RelatedParties").val(),"RelatedParties","RelatedParties");manageRelatedPartyMenuPanel()}function OpenConfirmationAddRelatedParty(){var searchWindow=$("#AddrealtedPartyWindow").data("kendoWindow");searchWindow.wrapper.addClass("middle-popup");searchWindow.center();searchWindow.open()}function ShowUBO(){$("#UBOerrorMsg").css("display","none");($("#RadioIndividual").is(":checked")||$("#RadioLegalEntity").is(":checked"))&&$("#UBODiv").css("display","block")}function HideErrorDiv(){$("#UBOerrorMsg").css("display","none")}function CreateRelatedParty(){var is_UBO=!1,url;$("#RadioYes").is(":checked")&&(is_UBO=!0);$("#RadioYes").is(":checked")||$("#RadioNo").is(":checked")?($("#UBOerrorMsg").css("display","none"),url=$("#RedirectToRelatedParty").val(),$("#RadioIndividual").is(":checked")&&(window.location.href=url+"?application="+$("#ApplicationNodeGUID").val()+"&&type=INDIVIDUAL&&isUBO="+is_UBO),$("#RadioLegalEntity").is(":checked")&&(window.location.href=url+"?application="+$("#ApplicationNodeGUID").val()+"&&type=LEGAL ENTITY&&isUBO="+is_UBO)):$("#UBOerrorMsg").css("display","block")}function onGridDataBoundSignatoryGroup(){$("#SignatoryGroup .k-grid-add").html("<span class='k-icon k-i-plus-circle mr-1'><\/span>New").addClass("new-contact").removeClass("k-button k-button-icontext");$("#SignatoryGroup .k-grid-content").attr("style","max-height: 400px");deleteEmptyGridRecord("SignatoryGroup")}function addSnGroupConfirmButton(e){$(".k-widget k-window k-display-inline-flex").addClass("leftpopup");$("a.k-grid-update").addClass("SAVEASDRAFT");var model=e.model;model.Status=!1;model.dirty=!0;$("a.k-grid-cancel").addClass("btn btn-link");$("a.k-grid-update")[0].innerHTML="SAVE AS DRAFT";$("a.k-grid-cancel")[0].innerHTML="<span class='k-icon k-i-cancel'><\/span>CLOSE";$('<a class="k-button k-button-icontext k-primary k-grid-update custom" href="#" k-icon k-i-delete"><\/span>SAVE & CLOSE<\/a>').insertBefore(".k-grid-update");$(".custom").click(function(){model.Status=!0});$(".SAVEASDRAFT").click(function(){model.Status=!1});$("#AllOrJointGroup").data("kendoRadioGroup").value($("#SignatureRightsValue").val());$("#SignatureRightsValue").trigger("change");$(".k-widget.k-window.k-display-inline-flex input").keyup(function(){var validatePopup=$(".k-popup-edit-form").kendoValidator().data("kendoValidator");validatePopup.validate();$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():$(this).attr("id")=="StartDate"||$(this).attr("id")=="EndDate"?validateSignatoryGroupDates(this):$($(this).closest("div")).children("div.field-validation-error").hide())});$(".k-widget.k-window.k-display-inline-flex input").change(function(){$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():($(this).attr("id")=="StartDate"||$(this).attr("id")=="EndDate")&&$("#EndDate")!=undefined&&$("#EndDate").val()!=""&&$("#StartDate")!=undefined&&$("#StartDate").val()!=""?validateSignatoryGroupDates(this):$($(this).closest("div")).children("div.field-validation-error").hide())});$(".k-widget.k-window.k-display-inline-flex select").change(function(){$($(this).closest("div").parent()).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div").parent()).children("div.field-validation-error").show():($(this).attr("id")=="StartDate"||$(this).attr("id")=="EndDate")&&$("#EndDate")!=undefined&&$("#EndDate").val()!=""&&$("#StartDate")!=undefined&&$("#StartDate").val()!=""?validateSignatoryGroupDates(this):$($(this).closest("div").parent()).children("div.field-validation-error").hide())});isApplicationPermisssionEdit=="False"&&setAllPopUpInputElementDisabled();GetSignatoryPersons(model.SignatoryPersonsList);ShowHideSignatoryRights()}function GetSignatoryPersons(selectedItemValue){var applicationNo=$("#ApplicationNumber").val(),ddlSignatoryName=$("#SignatoryGroupName").data("kendoDropDownList"),signatoryNameValue;ddlSignatoryName!=undefined&&(signatoryNameValue=ddlSignatoryName.value(),$.ajax({url:$("#SignatoryPersons_ReadUrl").val(),cache:!1,type:"POST",data:{applicationNumber:applicationNo,signatoryName:signatoryNameValue},success:function(result){var ddlSignatoryPersonsList=$("#SignatoryPersonsList").data("kendoMultiSelect");ddlSignatoryPersonsList.setDataSource(result);ddlSignatoryPersonsList.dataSource.read();selectedItemValue!=undefined&&selectedItemValue!=""&&selectedItemValue!=null&&ddlSignatoryPersonsList.value(selectedItemValue)}}))}function ShowHideSignatoryRights(){$("#divSignatureRights").hide();$("#AllOrJointGroup").data("kendoRadioGroup").value(null)}function onSignatoryGroupNameChange(){GetSignatoryPersons();ShowHideSignatoryRights()}function onSignatureRightsDataBound(){$("#AllOrJointGroup").data("kendoRadioGroup").value($("#SignatureRightsValue").val());$("#SignatureRightsValue").trigger("change")}function onSignatoryGroupDataBound(){ShowHideSignatoryRights()}function validateSignatoryGroupDates(currentElement){$.ajax({url:$("#ValidateSignatoryGroupDatesUrl").val(),cache:!1,type:"POST",data:{startDate:$("#StartDate").val(),endDate:$("#EndDate").val()},success:function(result){result==!0?$($(currentElement).closest("div")).children("div.field-validation-error").hide():$($(currentElement).closest("div")).children("div.field-validation-error").show()}})}function error_handlerSignatoryGroup(args){var errors=args.errors,grid;if(errors){args.sender.preventSync=!0;grid=$("#SignatoryGroup").data("kendoGrid");grid.one("dataBinding",function(e){e.preventDefault();$.each(errors,function(key,value){var message="";"errors"in value&&$.each(value.errors,function(){message+=this+"\n"});grid.editable.element.find("[data-valmsg-for='"+key+"']").replaceWith('<div class="k-tooltip k-tooltip-error k-validator-tooltip k-invalid-msg field-validation-error" ><span class="k-tooltip-icon k-icon k-i-warning"> <\/span><span class="k-tooltip-content">'+message+'<\/span><div class="k-callout k-callout-n"><\/div><\/div>').show()})})}}function IsSignatoryUseInMandate(data){var res="";return $("#HdnSignatoryGroupName").val(data.SignatoryGroup),$.ajax({"async":!1,type:"POST",url:$("#SignatoryUsedInMandateUrl").val(),dataType:"json",cache:!1,data:{id:$("#ApplicationId").val(),editGroupName:data.SignatoryGroup},success:function(result){res=result}}),res}function IsSignatureValidateforDelete(data){var res="";return $.ajax({"async":!1,type:"POST",url:$("#SignatureValidateforDeleteUrl").val(),dataType:"json",cache:!1,data:{apID:$("#ApplicationId").val(),SignatoryGroupName:data.SignatoryGroup},success:function(result){res=result}}),res}function SignatoryEditDeleteConfirmation(e){var dialog=$("#SignatoryGroupEditDeleteConfirmation").data("kendoWindow");dialog.wrapper.addClass("middle-popup");dialog.center().open();$("#SignatoryEditYes").unbind().click(function(){var dialog,row,grid;UpdateSignatureMandateRec();dialog=$("#SignatoryGroupEditDeleteConfirmation").data("kendoWindow");dialog.close();row=$(e.target).parent()[0];grid=$("#SignatoryGroup").data("kendoGrid");grid.editRow(row)});$("#SignatoryEditNo").click(function(){var dialog=$("#SignatoryGroupEditDeleteConfirmation").data("kendoWindow");dialog.close()})}function SignatoryGroupDeleteWarningMsg(){var dialog=$("#SignatoryGroupDeleteWarningMsg").data("kendoWindow");dialog.wrapper.addClass("middle-popup");dialog.center().open();$("#SignatoryGroupOk").click(function(){var dialog=$("#SignatoryGroupDeleteWarningMsg").data("kendoWindow");dialog.close()})}function UpdateSignatureMandateRec(){$.ajax({url:$("#SignatureMandateStatusUpdateUrl").val(),cache:!1,type:"POST",data:{id:$("#ApplicationId").val(),editGroupName:$("#HdnSignatoryGroupName").val()},success:function(){$("#SignatureMandate").data("kendoGrid").dataSource.read();$("#SignatureMandate").data("kendoGrid").refresh()}})}function onSignatureMandateDataBound(){$("#SignatureMandateIndividual .k-grid-add").html("<span class='k-icon k-i-plus-circle mr-1'><\/span>New").addClass("new-contact").removeClass("k-button k-button-icontext");$("#SignatureMandateIndividual .k-grid-content").attr("style","max-height: 400px");deleteEmptyGridRecord("SignatureMandateIndividual");isAllConfirmed($("#hdnApplication_LeftMenu_SignatureMandate").val(),"SignatureMandate","SignatureMandateIndividual")}function addConfirmButton_SMI(e){$(".k-widget k-window k-display-inline-flex").addClass("leftpopup");$("a.k-grid-update").addClass("SAVEASDRAFT");var model=e.model;model.SignatureMandateIndividual_Status=!1;model.dirty=!0;$("a.k-grid-cancel").addClass("btn btn-link");$("a.k-grid-update")[0].innerHTML="SAVE AS DRAFT";$("a.k-grid-cancel")[0].innerHTML="<span class='k-icon k-i-cancel'><\/span>CLOSE";$('<a class="k-button k-button-icontext k-primary k-grid-update custom" href="#" k-icon k-i-delete"><\/span>SAVE & CLOSE<\/a>').insertBefore(".k-grid-update");$(".custom").click(function(){model.SignatureMandateIndividual_Status=!0;GenerateSignatoryPersonValueList()});$(".SAVEASDRAFT").click(function(){model.SignatureMandateIndividual_Status=!1;GenerateSignatoryPersonValueList()});$(".k-widget.k-window.k-display-inline-flex input").keyup(function(){var validatePopup=$(".k-popup-edit-form").kendoValidator().data("kendoValidator");validatePopup.validate();$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():$($(this).closest("div")).children("div.field-validation-error").hide())});$(".k-widget.k-window.k-display-inline-flex input").change(function(){$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():$($(this).closest("div")).children("div.field-validation-error").hide())});isApplicationPermisssionEdit=="False"&&setAllPopUpInputElementDisabled()}function error_handlerSignatureMandate(args){var errors=args.errors,grid;if(errors){grid=$("#SignatureMandateIndividual").data("kendoGrid");grid.one("dataBinding",function(e){e.preventDefault();$.each(errors,function(key,value){var message="";"errors"in value&&$.each(value.errors,function(){message+=this+"\n"});grid.editable.element.find("[data-valmsg-for='"+key+"']").replaceWith('<div class="k-tooltip k-tooltip-error k-validator-tooltip k-invalid-msg field-validation-error" ><span class="k-tooltip-icon k-icon k-i-warning"> <\/span><span class="k-tooltip-content">'+message+'<\/span><div class="k-callout k-callout-n"><\/div><\/div>').show()})})}}function runAfterLoad(){var radioText=$("input[name='SignatureMandateTypeGroup']:checked").next("label").text();radioText=="Other"?($("#signatureMandateDIV").css("display","block"),isAllConfirmed($("#hdnApplication_LeftMenu_SignatureMandate").val(),"SignatureMandate","SignatureMandateIndividual")):($("#signatureMandateDIV").css("display","none"),setMenuSuccess($("#hdnApplication_LeftMenu_SignatureMandateIndividual").val()))}function onSignatureMandateDataBound(){$("#SignatureMandate .k-grid-add").html("<span class='k-icon k-i-plus-circle mr-1'><\/span>New").addClass("new-contact").removeClass("k-button k-button-icontext");$("#SignatureMandate .k-grid-content").attr("style","max-height: 400px");deleteEmptyGridRecord("SignatureMandate");isAllConfirmed($("#hdnApplication_LeftMenu_SignatureMandate").val(),"SignatureMandateLegal","SignatureMandate")}function addSMConfirmButton(e){$(".k-widget k-window k-display-inline-flex").addClass("leftpopup");$("a.k-grid-update").addClass("SAVEASDRAFT");var model=e.model;model.Status=!1;model.dirty=!0;$("a.k-grid-cancel").addClass("btn btn-link");$("a.k-grid-update")[0].innerHTML="SAVE AS DRAFT";$("a.k-grid-cancel")[0].innerHTML="<span class='k-icon k-i-cancel'><\/span>CLOSE";$('<a class="k-button k-button-icontext k-primary k-grid-update custom" href="#" k-icon k-i-delete"><\/span>SAVE & CLOSE<\/a>').insertBefore(".k-grid-update");$(".custom").click(function(){model.Status=!0;GenerateGroupValueList();GenerateGroupOneValueList();RemoveAllValidationMessage()});$(".SAVEASDRAFT").click(function(){model.Status=!1;GenerateGroupValueList();GenerateGroupOneValueList()});$(".k-widget.k-window.k-display-inline-flex input").keyup(function(){var validatePopup=$(".k-popup-edit-form").kendoValidator().data("kendoValidator");validatePopup.validate();$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():$($(this).closest("div")).children("div.field-validation-error").hide())});$(".k-widget.k-window.k-display-inline-flex input").change(function(){$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():$($(this).closest("div")).children("div.field-validation-error").hide())});$(".k-widget.k-window.k-display-inline-flex select").change(function(){$($(this).closest("div").closest("div")).next("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div").closest("div")).next("div.field-validation-error").show():$($(this).closest("div").closest("div")).next("div.field-validation-error").hide())});isApplicationPermisssionEdit=="False"&&setAllPopUpInputElementDisabled();setFieldsOnMandatetype();GetAuthorizeSignatoryGroupAll(model.AuthorizedSignatoryGroup)}function error_handlerSignatureMandateCompany(args){var errors=args.errors,grid;if(errors){grid=$("#SignatureMandate").data("kendoGrid");grid.one("dataBinding",function(e){e.preventDefault();$.each(errors,function(key,value){var message="";"errors"in value&&$.each(value.errors,function(){message+=this+"\n"});grid.editable.element.find("[data-valmsg-for='"+key+"']").replaceWith('<div class="k-tooltip k-tooltip-error k-validator-tooltip k-invalid-msg field-validation-error" ><span class="k-tooltip-icon k-icon k-i-warning"> <\/span><span class="k-tooltip-content">'+message+'<\/span><div class="k-callout k-callout-n"><\/div><\/div>').show()})})}}function GenerateGroupValueList(){for(var multiselect=$("#AuthorizedSignatoryGroupList").data("kendoMultiSelect"),signame="",items=multiselect.value(),i=0;i<items.length;i++)signame=signame+items[i]+"|";$("#AuthorizedSignatoryGroupValueList").val(signame).change().focus().focusout()}function GenerateGroupOneValueList(){for(var multiselect=$("#AuthorizedSignatoryGroup1List").data("kendoMultiSelect"),signame="",items=multiselect.value(),i=0;i<items.length;i++)signame=signame+items[i]+"|";$("#AuthorizedSignatoryGroupOneValueList").val(signame).change().focus().focusout()}function onSignatoryMandateLegalTypeChange(){setFieldsOnMandatetype();GetAuthorizeSignatoryGroupAll()}function setFieldsOnMandatetype(){var ddlSignatoryName=$("#MandateType").data("kendoDropDownList"),limitfrom,limitTo,rights,grouplist2;ddlSignatoryName!=undefined&&(ddlSignatoryName.text().toUpperCase()=="FOR AUTHORISED PERSONS"?(limitfrom=$("#LimitFrom").data("kendoTextBox"),limitfrom.value("0"),limitfrom.trigger("change"),limitTo=$("#LimitTo").data("kendoTextBox"),limitTo.value("0"),limitTo.trigger("change"),$("#LimitFrom").attr("disabled","disabled"),$("#LimitTo").attr("disabled","disabled"),$("#NumberofSignatures1").attr("disabled","disabled"),rights=$("#Rights").data("kendoDropDownList"),rights.value(""),rights.enable(!1),grouplist2=$("#AuthorizedSignatoryGroup1List").data("kendoMultiSelect"),grouplist2.value(""),grouplist2.enable(!1),grouplist2.trigger("change"),$("#NumberofSignatures1").val("")):($("#LimitFrom").removeAttr("disabled"),$("#LimitTo").removeAttr("disabled"),$("#NumberofSignatures1").removeAttr("disabled"),rights=$("#Rights").data("kendoDropDownList"),rights.enable(!0),grouplist2=$("#AuthorizedSignatoryGroup1List").data("kendoMultiSelect"),grouplist2.value($("#AuthorizedSignatoryGroup1").val()),grouplist2.enable(!0)))}function GetAuthorizeSignatoryGroupAll(selectedItemValue){var appId,ddlMandateType,mandateTypeValue;appId=$("#hdnapplicationId").val();ddlMandateType=$("#MandateType").data("kendoDropDownList");ddlMandateType!=undefined&&(mandateTypeValue=ddlMandateType.value(),$.ajax({url:$("#hdnAuthorizeSignatoryGroupURL").val(),cache:!1,type:"POST",data:{applicationid:appId,mandateType:mandateTypeValue},success:function(result){var ddlAuthorizeSignatoryList=$("#AuthorizedSignatoryGroupList").data("kendoMultiSelect");ddlAuthorizeSignatoryList.setDataSource(result);ddlAuthorizeSignatoryList.dataSource.read();selectedItemValue!=undefined&&selectedItemValue!=""&&selectedItemValue!=null&&ddlAuthorizeSignatoryList.value(selectedItemValue)}}))}function onSignatoryMandateLegalTypeDataBound(){setFieldsOnMandatetype()}function onGridDataBoundSourceOfOutgoingTran(){$("#SourceOfOutgoingTran .k-grid-add").html("<span class='k-icon k-i-plus-circle mr-1'><\/span>New").addClass("new-contact").removeClass("k-button k-button-icontext");$("#SourceOfOutgoingTran .k-grid-content").attr("style","max-height: 400px");deleteEmptyGridRecord("SourceOfOutgoingTran");validatePurposeAndActivity()}function addConfirmButton_SOT(e){$(".k-widget k-window k-display-inline-flex").addClass("leftpopup");$("a.k-grid-update").addClass("SAVEASDRAFT");var model=e.model;model.SourceOfOutgoingTransactions_Status=!1;model.dirty=!0;$("a.k-grid-cancel").addClass("btn btn-link");$("a.k-grid-update")[0].innerHTML="SAVE AS DRAFT";$("a.k-grid-cancel")[0].innerHTML="<span class='k-icon k-i-cancel'><\/span>CLOSE";$('<a class="k-button k-button-icontext k-primary k-grid-update custom" href="#" k-icon k-i-delete"><\/span>SAVE & CLOSE<\/a>').insertBefore(".k-grid-update");$(".custom").click(function(){model.SourceOfOutgoingTransactions_Status=!0;$(".k-widget.k-window.k-display-inline-flex input").each(function(){if($(this).closest("div").children("div.field-validation-error").length>0){var elementName=$(this).attr("name");$($(this).closest("div")).children("div.field-validation-error").remove();$($(this).closest("div")).append('<span class="field-validation-valid k-hidden" data-valmsg-for="'+elementName+'" data-valmsg-replace="true"><\/span>')}})});$(".SAVEASDRAFT").click(function(){model.SourceOfOutgoingTransactions_Status=!1});$(".k-widget.k-window.k-display-inline-flex input").keyup(function(){var validatePopup=$(".k-popup-edit-form").kendoValidator().data("kendoValidator");validatePopup.validate();$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():$($(this).closest("div")).children("div.field-validation-error").hide())});$(".k-widget.k-window.k-display-inline-flex input").change(function(){$($(this).closest("div")).children("div.field-validation-error").length>0&&($(this).val()==""?$($(this).closest("div")).children("div.field-validation-error").show():$($(this).closest("div")).children("div.field-validation-error").hide())});isApplicationPermisssionEdit=="False"&&setAllPopUpInputElementDisabled()}function error_handlerSourceOfOutcomingTransactions(args){var errors=args.errors,grid;if(errors){grid=$("#SourceOfOutgoingTran").data("kendoGrid");grid.one("dataBinding",function(e){e.preventDefault();$.each(errors,function(key,value){var message="";"errors"in value&&$.each(value.errors,function(){message+=this+"\n"});grid.editable.element.find("[data-valmsg-for='"+key+"']").replaceWith('<div class="k-tooltip k-tooltip-error k-validator-tooltip k-invalid-msg field-validation-error" ><span class="k-tooltip-icon k-icon k-i-warning"> <\/span><span class="k-tooltip-content">'+message+'<\/span><div class="k-callout k-callout-n"><\/div><\/div>').show()})})}}var isApplicationPermisssionEdit,loadingPanelVisible,downloadUrl,_selectedCardType,downloadURL,accordion;$("#accordionAccountsDetails").kendoPanelBar({expandMode:"multiple"});accordion=$("#accordionAccountsDetails").data("kendoPanelBar");accordion.collapse("#chartSection");$("#context-menu").kendoContextMenu({target:"#AccountsDetails",showOn:"click",filter:"td:first-child",select:function(e){var row=$(e.target).parent()[0],grid=$("#AccountsDetails").data("kendoGrid"),tr=$(e.target).closest("tr"),data=grid.dataItem(tr),item=e.item.id,check,isApplicationPermisssionEdit;switch(item){case"addRow":grid.addRow();break;case"editRowAccounts":if(check=IsAccountUseInCard(data),isApplicationPermisssionEdit=$("#ApplicationIsEdit").val(),check=="True"&&isApplicationPermisssionEdit=="True"){AccountEditDeleteConfirmation(e);break}else{grid.editRow(row);break}case"removeRow":DisplayDeleteConfirmationContextMenu(e,data,"AccountsDetails")}}});isApplicationPermisssionEdit=$("#ApplicationIsEdit").val();$("#accordionApplicants").kendoPanelBar({expandMode:"multiple"});accordion=$("#accordionApplicants").data("kendoPanelBar");accordion.collapse("#chartSection");$("#context-menuApplicants").kendoContextMenu({target:"#Applicants",showOn:"click",filter:"td:first-child",select:function(e){var row=$(e.target).parent()[0],grid=$("#Applicants").data("kendoGrid"),tr=$(e.target).closest("tr"),data=grid.dataItem(tr),item=e.item.id,url;switch(item){case"editRowApplicants":url=$("#RedirectToApplicant").val();window.location.href=url+"?application="+$("#ApplicationNodeGUID").val()+"&&applicant="+data.NodeGUID;break;case"removeRow":DisplayDeleteConfirmationContextMenu(e,data,"Applicants")}}});$("#accordionApplicationDetails").kendoPanelBar({expandMode:"multiple"});accordion=$("#accordionApplicationDetails").data("kendoPanelBar");accordion.collapse("#chartSection");$(document).ready(function(){$(".checked-readonly input").prop("disabled",!0);$(".readonly input").prop("disabled",!0);$(".readonly input").prop("checked",!1)});$(document).ready(function(){$(".toast").toast("show")});isApplicationPermisssionEdit=$("#ApplicationIsEdit").val();$("#accordionPurposeAndActivity").kendoPanelBar({expandMode:"multiple"});accordion=$("#accordionPurposeAndActivity").data("kendoPanelBar");accordion.collapse("#chartSection");$(document).ready(function(){isApplicationPermisssionEdit=="False"&&setAllInputElementDisabled("app-body-per");validatePurposeAndActivity();validateGroupStructure();showHideCardEbankingSection();$("#IsDecissionCommentsAllowed").val()=="True"&&($("#DecisionHistory_DecisionID").data("kendoDropDownList").enable(!0),$("#DecisionHistory_CommentsID").prop("disabled",!1),$("#DecisionHistory_CommentsID").removeAttr("disabled"));$(".thousands-separator").each(function(){var value=$(this).val();value&&$(this).val(formatNumber(parseFloat(value).toFixed(2)))});$(".thousands-separator").focus(function(){var value=$(this).val().replace(/,/g,"");$(this).val(value)});$(".thousands-separator").blur(function(){if($(this).val()!=""){var value=parseFloat($(this).val()).toFixed(2);$(this).val(formatNumber(value))}});$("#ApplicationTypeName").val()=="INDIVIDUAL"&&$("#SignatureMandateTypeGroup > li:nth-child(1) > label:nth-child(2)").text($("#hdnIndividualSignatureMandateLabel").val())});$(document).on("input",".custom-numeric",function(){this.value=this.value.replace(/[^\d-]/g,"")});$(document).on("input",".custom-no-negetive-numeric",function(){this.value=this.value.replace(/\D/g,"")});$(document).on("input",".custom-decimal",function(){this.value=this.value.replace(/[^\d.-]/g,"")});$(document).on("input",".custom-negetive-decimal",function(){this.value=this.value.replace(/[^\d.-]/g,"")});loadingPanelVisible=!1;$("#loader").kendoLoader({visible:!1});$("#btnApplicationFinalSubmit").click(function(){showHideLoader()});$(".btnShowLoader").click(function(){showHideLoader()});$("#btnApplicationClose").click(function(){showHideLoader()});$("#k-animation-container > ul > li").click(function(){showHideLoader()});$("#editRowApplicants").click(function(){showHideLoader()});$("#editRowRelatedP").click(function(){showHideLoader()});$(".push-hide").click(function(){showHideLoader()});$("#accordionBankDocuments").kendoPanelBar({expandMode:"multiple"});accordion=$("#accordionBankDocuments").data("kendoPanelBar");accordion.collapse("#chartSection");$("#context-menuBankdocuments").kendoContextMenu({target:"#Bankdocuments",showOn:"click",filter:"td:first-child",select:function(e){var row=$(e.target).parent()[0],grid=$("#Bankdocuments").data("kendoGrid"),tr=$(e.target).closest("tr"),data=grid.dataItem(tr),item=e.item.id;switch(item){case"addRow":grid.addRow();break;case"editRowBankDoc":grid.editRow(row);break;case"removeRow":DisplayDeleteConfirmationContextMenu(e,data,"Bankdocuments")}}});downloadUrl=$("#DownloadFileUrl").val();$("#accordionDebitCardDetails").kendoPanelBar({expandMode:"multiple"});accordion=$("#accordionDebitCardDetails").data("kendoPanelBar");accordion.collapse("#chartSection");$("#context-menuDebitCardDetails").kendoContextMenu({target:"#DebitCardDetails",showOn:"click",filter:"td:first-child",select:function(e){var row=$(e.target).parent()[0],grid=$("#DebitCardDetails").data("kendoGrid"),tr=$(e.target).closest("tr"),data=grid.dataItem(tr),item=e.item.id;switch(item){case"addRow":grid.addRow();break;case"editRowCards":grid.editRow(row);break;case"removeRow":DisplayDeleteConfirmationContextMenu(e,data,"DebitCardDetails")}}});$(document).ready(function(){$("#IsDisabledDecision").val()=="True"&&($("#DecisionHistory_DecisionID").data("kendoDropDownList").enable(!0),$("#DecisionHistory_CommentsID").removeAttr("disabled"),$("#DecisionHistory_CommentsID").prop("disabled",!1))});$(function(){$("#DecisionHistoryBtn").on("click",function(evt){var isFormValid=$("#DecisionHistoryForm").valid();isFormValid&&(evt.preventDefault(),$.post("/Applications/DecisionHistory",$("form").serialize(),function(response){$("#DecisionHistoryDiv").html(response);show("#DecisionHistoryDiv");$("#DecisionHistory_DecisionID").val("");$("#DecisionHistory_StageID").val("");$("#DecisionHistory_CommentsID").val("")}))})});$(function(){$("form").kendoValidator()});$("#accordionDecisionHistorys").kendoPanelBar({expandMode:"multiple"});accordion=$("#accordionDecisionHistorys").data("kendoPanelBar");accordion.collapse("#chartSection");$("#accordionEBankingSubscriber").kendoPanelBar({expandMode:"multiple"});accordion=$("#accordionEBankingSubscriber").data("kendoPanelBar");accordion.collapse("#chartSection");$("#context-menuEBankingSubscriber").kendoContextMenu({target:"#EBankingSubscriber",showOn:"click",filter:"td:first-child",select:function(e){var row=$(e.target).parent()[0],grid=$("#EBankingSubscriber").data("kendoGrid"),tr=$(e.target).closest("tr"),data=grid.dataItem(tr),item=e.item.id;switch(item){case"addRow":grid.addRow();break;case"editRowEbank":grid.editRow(row);break;case"removeRow":DisplayDeleteConfirmationContextMenu(e,data,"EBankingSubscriber")}}});$("#accordionExpectedDocuments").kendoPanelBar({expandMode:"multiple"});accordion=$("#accordionExpectedDocuments").data("kendoPanelBar");accordion.collapse("#chartSection");$("#context-menuExpectedDocuments").kendoContextMenu({target:"#ExpectedDocuments",showOn:"click",filter:"td:first-child",select:function(e){var row=$(e.target).parent()[0],grid=$("#ExpectedDocuments").data("kendoGrid"),tr=$(e.target).closest("tr"),data=grid.dataItem(tr),item=e.item.id;switch(item){case"addRow":grid.addRow();break;case"editRowExpDoc":grid.editRow(row);break;case"removeRow":DisplayDeleteConfirmationContextMenu(e,data,"ExpectedDocuments")}}});downloadURL=$("#DownloadFileUrl").val();$(document).ready(function(){var entityBelong=$("#DoesTheEntityBelongToAGroupNameID").val();entityBelong=="true"&&$("#GroupStructureGridID").css("display","block")});$("#accordionGroupStructure").kendoPanelBar({expandMode:"multiple"});accordion=$("#accordionGroupStructure").data("kendoPanelBar");accordion.collapse("#chartSection");$("#context-menuGroupStructure").kendoContextMenu({target:"#GroupStructure",showOn:"click",filter:"td:first-child",select:function(e){var row=$(e.target).parent()[0],grid=$("#GroupStructure").data("kendoGrid"),tr=$(e.target).closest("tr"),data=grid.dataItem(tr),item=e.item.id;switch(item){case"addRow":grid.addRow();break;case"editRowGpStruc":grid.editRow(row);break;case"removeRow":DisplayDeleteConfirmationContextMenu(e,data,"GroupStructure")}}});$("#accordionNoteDetails").kendoPanelBar({expandMode:"multiple"});accordion=$("#accordionNoteDetails").data("kendoPanelBar");accordion.collapse("#chartSection");$("#context-menuNoteDetails").kendoContextMenu({target:"#NoteDetails",showOn:"click",filter:"td:first-child",select:function(e){var row=$(e.target).parent()[0],grid=$("#NoteDetails").data("kendoGrid"),tr=$(e.target).closest("tr"),data=grid.dataItem(tr),item=e.item.id;switch(item){case"addRow":grid.addRow();break;case"editRowNotes":grid.editRow(row);break;case"removeRow":DisplayDeleteConfirmationContextMenu(e,data,"NoteDetails")}}});$("#accordionRelatedParties").kendoPanelBar({expandMode:"multiple"});accordion=$("#accordionRelatedParties").data("kendoPanelBar");accordion.collapse("#chartSection");$("#context-menuRelatedParties").kendoContextMenu({target:"#RelatedParties",showOn:"click",filter:"td:first-child",select:function(e){var row=$(e.target).parent()[0],grid=$("#RelatedParties").data("kendoGrid"),tr=$(e.target).closest("tr"),data=grid.dataItem(tr),item=e.item.id,url;switch(item){case"editRowRelatedP":url=$("#RedirectToRelatedParty").val();window.location.href=url+"?application="+$("#ApplicationNodeGUID").val()+"&&relatedParty="+data.NodeGUID+"&&type="+data.Type;break;case"removeRow":DisplayDeleteConfirmationContextMenu(e,data,"RelatedParties")}}});$("#accordionSignatoryGroup").kendoPanelBar({expandMode:"multiple"});accordion=$("#accordionSignatoryGroup").data("kendoPanelBar");accordion.collapse("#chartSection");$("#context-menuSignatoryGroup").kendoContextMenu({target:"#SignatoryGroup",showOn:"click",filter:"td:first-child",select:function(e){var row=$(e.target).parent()[0],grid=$("#SignatoryGroup").data("kendoGrid"),tr=$(e.target).closest("tr"),data=grid.dataItem(tr),item=e.item.id,check;switch(item){case"addRow":grid.addRow();break;case"editRowSignGp":if(check=IsSignatoryUseInMandate(data),check=="True"){SignatoryEditDeleteConfirmation(e);break}else{grid.editRow(row);break}case"removeRow":if(check=IsSignatureValidateforDelete(data),check=="True"){DisplayDeleteConfirmationContextMenu(e,data,"SignatoryGroup");break}else{SignatoryGroupDeleteWarningMsg(e);break}IsSignatoryUseInMandate(data)}}});$("#accordionSignatureMandateIndividual").kendoPanelBar({expandMode:"multiple"});accordion=$("#accordionSignatureMandateIndividual").data("kendoPanelBar");accordion.collapse("#chartSection");$("#context-menuSignatureMandateIndividual").kendoContextMenu({target:"#SignatureMandateIndividual",showOn:"click",filter:"td:first-child",select:function(e){var row=$(e.target).parent()[0],grid=$("#SignatureMandateIndividual").data("kendoGrid"),tr=$(e.target).closest("tr"),data=grid.dataItem(tr),item=e.item.id;switch(item){case"addRow":grid.addRow();break;case"editRowSigManInd":grid.editRow(row);break;case"removeRow":DisplayDeleteConfirmationContextMenu(e,data,"SignatureMandateIndividual")}}});$(document).ready(function(){var radioText=$("input[name='SignatureMandateTypeGroup']:checked").next("label").text();radioText=="Other"?($("#signatureMandateDIV").css("display","block"),isAllConfirmed($("#hdnApplication_LeftMenu_SignatureMandate").val(),"SignatureMandate","SignatureMandateIndividual")):($("#signatureMandateDIV").css("display","none"),setMenuSuccess($("#hdnApplication_LeftMenu_SignatureMandateIndividual").val()))});$(document).on("change","input[name='SignatureMandateTypeGroup']",function(){var radioText=$("input[name='SignatureMandateTypeGroup']:checked").next("label").text();radioText=="Other"?($("#signatureMandateDIV").css("display","block"),isAllConfirmed($("#hdnApplication_LeftMenu_SignatureMandate").val(),"SignatureMandate","SignatureMandateIndividual")):($("#signatureMandateDIV").css("display","none"),setMenuSuccess($("#hdnApplication_LeftMenu_SignatureMandateIndividual").val()))});window.addEventListener("load",function(){window.setTimeout(runAfterLoad,1e3)},!1);$("#accordionSignatureMandate").kendoPanelBar({expandMode:"multiple"});accordion=$("#accordionSignatureMandate").data("kendoPanelBar");accordion.collapse("#chartSection");$("#context-menuSignatureMandate").kendoContextMenu({target:"#SignatureMandate",showOn:"click",filter:"td:first-child",select:function(e){var row=$(e.target).parent()[0],grid=$("#SignatureMandate").data("kendoGrid"),tr=$(e.target).closest("tr"),data=grid.dataItem(tr),item=e.item.id;switch(item){case"addRow":grid.addRow();break;case"editRowSigManLeg":grid.editRow(row);break;case"removeRow":DisplayDeleteConfirmationContextMenu(e,data,"SignatureMandate")}}});$("#accordionSourceOfOutgoingTran").kendoPanelBar({expandMode:"multiple"});accordion=$("#accordionSourceOfOutgoingTran").data("kendoPanelBar");accordion.collapse("#chartSection");$("#context-menuSourceOfOutgoingTran").kendoContextMenu({target:"#SourceOfOutgoingTran",showOn:"click",filter:"td:first-child",select:function(e){var row=$(e.target).parent()[0],grid=$("#SourceOfOutgoingTran").data("kendoGrid"),tr=$(e.target).closest("tr"),data=grid.dataItem(tr),item=e.item.id;switch(item){case"addRow":grid.addRow();break;case"editRowSOO":grid.editRow(row);break;case"removeRow":DisplayDeleteConfirmationContextMenu(e,data,"SourceOfOutgoingTran")}}});